# 数据模型与存储设计

## 1. 概览
- 系统域：用户/角色/菜单/部门/字典/参数/日志
- 项目域：项目/阶段/任务/成员/文件/日志/收藏
- 工作流域：模型/部署/实例/任务/表单/抄送/分类

## 2. 设计规范
- 命名：小写下划线，实体驼峰
- 审计：`create_by/create_time/update_by/update_time`
- 逻辑删除：`del_flag`（0/1/2）
- 唯一键：编码/业务键唯一索引

## 3. 关键表（示例）
- `project`：项目主表（进度、预算、经理、部门）
- `project_task`：任务（负责人、状态、优先级、工时、期限）
- `wf_*`：Flowable 相关历史/运行时表
- `sys_*`：系统域基础表

## 4. 索引策略
- 高频查询字段建立组合索引（状态、负责人、时间）
- 避免低选择性字段单列索引
- 覆盖索引优化列表查询

## 5. 数据隔离
- 按域分库：system/project/workflow/...
- 读写分离：读多写少的服务优先
- 分表：按时间/租户（可选）

## 6. 一致性与事务
- 本地事务：单服务内 MyBatis-Plus 事务
- 分布式事务：Seata（可选，关键跨域写）
- 事件最终一致：MQ 事件驱动

## 7. 归档与清理
- 历史流程与日志按时间归档
- 大文件与无用附件定期清理
- 数据脱敏与备份策略
