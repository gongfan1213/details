# 面试话术｜部署与可用性（Docker + 灰度 + 容错）

## 1. 我做了什么（30s 概述）
- 规范化本地/测试/生产的部署流程：Docker 化服务、Compose 编排依赖；生产支持灰度/回滚、限流/熔断/降级、读写分离与多副本，保证高可用。

## 2. 技术要点
- 镜像构建与最小化；Nacos/Sentinel/RocketMQ/Redis/MySQL 集群化（生产）。
- 灰度：按用户/版本 Header 路由；蓝绿与金丝雀回滚。

## 3. 遇到的问题（难点）
1) 配置漂移与多环境差异导致启动失败。
2) 发布导致缓存雪崩与瞬时高峰。

## 4. 解决方案与取舍
- 配置中心：
  - 方案：Nacos 管理分环境配置；敏感信息用密钥存储；变更回滚有版本记录。
- 发布节流：
  - 方案：灰度分流 + 预热缓存 + 慢启动；限流保护主干接口。

## 5. 效果与数据
- 发布失败回滚 < 1 分钟；事故工单数量明显下降。

## 6. 面试官追问
- 问：如何评估容量与限流阈值？
  - 答：基于压测与历史峰值，按 70%-80% 阈值设置；设置保护阈值与应急开关。
