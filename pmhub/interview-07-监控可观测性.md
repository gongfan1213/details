# 面试话术｜监控与可观测性（Actuator + Admin + SkyWalking）

## 1. 我做了什么（30s 概述）
- 建立从系统到业务的可观测闭环：实例健康、JVM/HTTP 指标、链路追踪、业务大盘与告警；问题排障从“日志搜索”升级为“链路定位 + 指标关联”。

## 2. 技术要点
- Actuator 指标端点；Spring Boot Admin 集中查看日志/线程/环境；SkyWalking Trace/Span。
- 统一日志 JSON 化 + traceId 贯穿。

## 3. 遇到的问题（难点）
1) 采样开销与数据成本；高并发下指标采集的性能影响。
2) 链路断裂：异步线程/消息队列场景 traceId 传递。

## 4. 解决方案与取舍
- 采样与聚合：
  - 方案：链路采样率按环境调整（dev 100%，prod 10%）；关键接口强制采样；指标按分钟聚合。
  - 取舍：控制成本，保证关键链路可见。
- trace 透传：
  - 方案：MDC 包装线程池；消息头透传 traceId；网关注入并校验。
  - 取舍：微小代码入侵换来可观测完整性。

## 5. 效果与数据
- 故障定位平均时间 < 5 分钟；经常性问题（慢 SQL/线程阻塞）提前预警避免事故。

## 6. 面试官追问
- 问：如何避免监控系统“自成瓶颈”？
  - 答：监控组件独立部署、限流与降级、异步上报、分级采样；监控不可影响业务请求路径。
