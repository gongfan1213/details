# 可扩展性与通用性

## 1. 目标
- 快速二开与功能扩展
- 跨业务/跨行业复用核心能力
- 降低升级与维护成本

## 2. 扩展原则
- 松耦合：接口驱动，避免强依赖
- 模块化：`pmhub-*` 分层清晰，职责单一
- 配置化：Nacos 配置中心治理开关与策略
- 约定优于配置：统一目录/命名/响应规范

## 3. 扩展位
- 领域模块：在 `pmhub-modules` 新增业务服务（如 `pmhub-crm`）
- 基础组件：在 `pmhub-base-*` 增强安全、数据源、Swagger、Seata、Notice 等
- 前端路由：`pmhub-ui/src/router` 注册新菜单，`views/` 下新增页面
- API 契约：在 `pmhub-api-*` 定义跨服务 DTO/Feign 接口

## 4. 插件化思路（建议）
- 业务插件：以 Starter 形式引入（`pmhub-plugin-*`）
- 表单/流程插件：约定表单 JSON 与 BPMN 扩展元素
- 网关过滤器：全局/路由级过滤器按需挂载

## 5. 通用性设计
- RBAC 权限/菜单/数据权限可复用
- 项目/任务/审批通用域模型（适配多行业）
- 工作流可配置：通过模型/表单/规则即插即用

## 6. 多租户（可选）
- 方案A：租户字段隔离 + 行级权限
- 方案B：库表级隔离（按租户分库/分表）
- 网关与鉴权：透传 `tenantId` 并约束数据访问

## 7. 版本与兼容
- API 版本化：`/api/v1/...`，通过网关路由分流
- 数据版本：Liquibase 管理 schema 变更
- 向后兼容：字段扩展采用可空/默认值策略

## 8. 二开指南
- 新增业务：先建表→补 ER/索引→生成代码→补充领域逻辑
- 扩展接口：在 `pmhub-api-*` 定义 DTO/Feign，落地于对应模块
- 前端接入：新增菜单/权限，复用通用列表/表单组件

## 9. 性能与规模扩展
- 横向扩展：服务无状态，副本扩容
- 垂直扩展：热点拆分、读写分离、分库分表
- 缓存分层：本地缓存 + Redis + 失效事件

## 10. 风险与建议
- 过度通用：先实现 80% 共性，保留 20% 定制点
- 模板漂移：升级基线模板时，优先对比合并
- 配置膨胀：归档历史配置，保持分组清晰
