# 部署与环境

## 1. 环境要求
- JDK 1.8、Maven 3.6+
- MySQL 5.7/8.0、Redis、Nacos（standalone/dev）
- Node.js 14+/npm

## 2. 端口规划（默认）
- 网关 6880
- 认证 6800
- 系统 6801
- 代码生成 6802
- 定时任务 6803
- 项目 6806
- 工作流 6808
- 监控 6888

## 3. 本地启动
1) 导入 `sql/` 下数据库文件
2) 启动 MySQL/Redis/Nacos
3) 修改 Nacos 中各 `*-dev.yml` 数据源配置
4) 依次启动：网关→认证→系统→项目→工作流→生成→任务→监控
5) 前端 `pmhub-ui`: `npm i && npm run dev`

## 4. Docker 部署
- 参考 `docker/` 目录：`docker-compose.yml`、nacos/mysql/redis 镜像
- 准备：挂载数据卷、环境变量、端口映射
- 镜像：后端各服务打包 `jar` + 构建镜像，统一网络

## 5. 生产建议
- Nacos/Sentinel/RocketMQ/Redis/MySQL 集群化
- 日志落盘：按服务/日期切割，挂载到宿主机
- 健康检查：`/actuator/health`
- 配置变更：灰度发布 + 回滚策略

## 6. 常见问题
- 启动失败：核对 Nacos 配置/数据库连接/表是否导入
- 端口占用：调整端口或释放进程
- 前端无法登录：跨域/网关路由/鉴权失败
