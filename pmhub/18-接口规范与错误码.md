# 接口规范与错误码

## 1. 安全与鉴权
- Header：`Authorization: Bearer <token>`
- 内部调用：`X-Inner-Auth: true`（`@InnerAuth`）
- 幂等：`Idempotency-Key`（可选）

## 2. 统一响应
```json
{
  "code": 200,
  "msg": "success",
  "data": {}
}
```

## 3. 分页规范
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "list": [],
    "total": 0,
    "size": 10,
    "current": 1,
    "searchCount": true,
    "pages": 0
  }
}
```

## 4. 常用错误码
- 200：成功
- 400：参数错误/校验失败
- 401：未认证或 Token 过期
- 403：无权限
- 404：资源不存在
- 409：资源冲突/幂等冲突
- 429：限流
- 500：系统异常

## 5. 错误体
```json
{
  "code": 400,
  "msg": "参数校验失败: xxx",
  "requestId": "trace-xxxx",
  "path": "/api/..."
}
```

## 6. 版本与兼容
- 路由版本：`/api/v1/...`
- Header：`X-Api-Version`
- 弃用策略：Header/响应体加 `deprecated` 标记

## 7. 限流与配额
- Header：`X-RateLimit-Limit/Remaining/Reset`
- 业务维度：按用户/IP/接口

## 8. 文档
- Swagger/Knife4j 在线文档
- DTO 注释/约束补充
- 示例请求/响应对齐前端
