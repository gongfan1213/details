# 面试话术｜工作流（Flowable：流程/任务/表单/部署）

## 1. 我做了什么（30s 概述）
- 基于 Flowable 搭建企业流程中心：流程建模、部署、发起、代办/待签/已办、抄送、流程监控与统计；前端内嵌 BPMN 设计器与表单设计器。

## 2. 技术选型
- Flowable 6.7.x，Spring Boot Starter；BPMN.js 前端建模；Aviator 表达式/节点条件；与系统用户/角色打通。

## 3. 遇到的问题（难点）
1) 动态表单：不同流程节点字段/校验差异大，后端如何通用存储与校验。
2) 任务分配策略：候选人/候选组/多人签收、会签/或签，业务差异大。
3) 可观测性：线上排障需要快速定位卡点与变量。

## 4. 我的解决方案与取舍
- 动态表单：
  - 方案：表单 JSON + 渲染引擎，后端保存 JSON 与快照，节点定义表单 key；校验规则统一在服务端校验。
  - 取舍：牺牲强类型，换来高灵活；提供字段映射导出报表能力。
- 分配策略：
  - 方案：封装候选策略 SPI：按角色/部门/直线汇报链；会签收集器统一实现；可插拔扩展。
  - 取舍：优先实现主干策略，满足 80% 需求，留扩展点。
- 可观测：
  - 方案：统一记录流程实例与任务的变量、活动轨迹；前端高亮当前节点；失败节点记录异常与重试入口。
  - 取舍：存储量上升，通过冷热分层与保留期控制成本。

## 5. 效果与数据
- 常规审批流程（3-5 节点）平均耗时下降 40%；线上排障平均定位时间 < 5 分钟。

## 6. 可扩展与优化
- 自定义监听器市场；流程模板中心；流程性能画像与瓶颈建议。

## 7. 面试官可能追问点
- 问：如何实现会签与或签？
  - 答：基于 Flowable 多实例节点，配置 collection 与 completionCondition；会签统计逐步收敛。
- 问：如何做流程版本升级的兼容？
  - 答：新实例走最新版，老实例按原版执行；必要时提供迁移 API，迁移前校验变量与节点映射。
