# BluePlan Research｜技术面试总览话术（自我介绍→项目背景→技术难点→故障案例→架构演进→Q&A）

## 0. 自我介绍（~30-60s）
- 背景：资深 Python/后端，聚焦 Gen-AI 应用工程与多智能体编排。
- 技术栈：FastAPI、LangGraph/LangChain、SSE 流式、Milvus、Redis、Pydantic、异步并发、可观测（LangSmith/结构化日志）。
- 强项：工程落地与可用性（恢复/降级/观测）、多Agent 编排、搜索与向量检索融合、性能与成本优化。

## 1. 项目背景（~60-90s）
- 项目：BluePlan Research——面向社媒内容创作的 Gen-AI 多智能体系统。
- 两套形态：
  - Nova3（研究/编排）：Supervisor + 洞察/画像/打点/事实/写作子Agent，队列并行与检查点恢复。
  - Loomi（创作/Notes）：Concierge + Orchestrator（ReAct），面向创作链条的可控输出。
- 关键能力：
  - API（FastAPI）+ SSE 实时流；
  - 记忆/上下文（会话态+长期记忆+检索注入）；
  - 实时搜索（Jina/Web/XHS）与 Milvus 语义检索混合；
  - 多环境配置与安全（Pydantic 校验、加密、灰度）。

## 2. 技术难点与解决方案（~2-3min）
- 并发与可恢复：
  - 难点：多Agent 并行/串联易串话、失败回退难。
  - 方案：会话级 Agent 实例隔离；`redis_checkpoint` 最小可恢复点；三层队列（内存/Redis/文件）+ 限流与租约；事件幂等键。
- 记忆与上下文污染：
  - 难点：长对话 Token 与走题；多Agent 共享记忆污染。
  - 方案：state（短期）与memory（长期）分层；时间窗/重要性裁剪；语义检索→重排→压缩后注入；敏感信息脱敏与加密。
- 流式与稳定性：
  - 难点：SSE 断流、乱序、首字时间。
  - 方案：心跳+自动重连；事件编号与阶段聚合；分块 flush 与 DONE 约定；历史回放→实时续传混合流。
- 向量检索质量：
  - 难点：嵌入不稳定、噪声与重复。
  - 方案：OpenAI→本地 embedding 回退；语义/关键词/混合策略；MMR 与去重；TopK 后再重排与压缩；阈值场景化。
- 配置与环境：
  - 难点：多环境漂移与误配。
  - 方案：Pydantic 强校验、变更审计与回滚、KMS/本地加密、Provider 抽象与配额白名单。

## 3. 故障案例（~2min）
- 案例A｜SSE 断流导致前端“卡住”
  - 症状：长生成任务下偶发断连，用户无反馈。
  - 定位：Nginx/浏览器超时+后端未及时发送 keep-alive。
  - 处置：服务端心跳；首事件在1s内发出；断线自动重连；历史回放→实时续传；DONE 标识统一。
  - 效果：首字时间<1s；中断恢复率↑，投诉下降。
- 案例B｜Redis 抖动引发上下文读取失败
  - 症状：上下文偶发空；并发时序错乱。
  - 定位：读写竞争+过期键；热键冲突。
  - 处置：本地缓存+版本推进；键 TTL 与二级索引；热点键租约；失败回退到文件层。
  - 效果：上下文命中率↑，恢复成功率↑。
- 案例C｜Milvus/Embedding 外部依赖不可用
  - 症状：检索服务 5xx 或限流；嵌入接口失败。
  - 处置：降级到关键词检索；OpenAI→本地 embedding 回退；并发/超时/指数退避；结果压缩控制成本。
  - 效果：检索可用率稳定；端到端故障对业务影响可控。

## 4. 架构演进（~90s）
- v0：单体+直连LLM → POC 验证。
- v1：多Agent 拆分 + 流式SSE → 观测与并发提升。
- v2：引入检查点/三层队列/记忆分层 → 可恢复与稳定性显著提升。
- v3：Milvus 混合检索与证据结构化 → 幻觉率下降，解释性增强。
- v4：多环境配置/加密与灰度 → 变更风险降低，运维成本下降。
- v5：Loomi Notes 与 ReAct 编排 → 创作链条更可控，可追溯。

## 5. Q&A 速答（~2-3min）
- Q：如何保证不同会话/租户隔离？
  - A：会话级实例+命名空间键；持久化与向量库均带 user/session 作用域。
- Q：如何降低幻觉与走题？
  - A：多源检索证据+Facts 校验；打点→段落映射；生成前裁剪与压缩注入。
- Q：为何选 Milvus？
  - A：高性能/云原生/向量规模与索引选择更灵活；搭配混合检索可控性更好。
- Q：并发压测如何过？
  - A：连接池/限流/队列水位监控；失败降级与熔断；SSE 分段输出降低感知等待。
- Q：如何做可观测与故障定位？
  - A：LangSmith Trace + 结构化事件日志 + 指标告警（延迟/错误率/队列深度/命中率）。
- Q：上线风险控制？
  - A：强校验与变更回滚；金丝雀/灰度；回放/恢复演练流程。
- Q：后续演进方向？
  - A：统一 RAG 中台、可学习记忆桶、异构模型编排、评测与自动提示词优化、KV+向量混合缓存。

## 6. 备用话术（限时版 ~60-90s）
- 我负责的 BluePlan Research 是一个多Agent 的内容研究与创作系统（Nova3+Loomi），以 FastAPI+SSE 提供实时体验。核心难点在多Agent 并发与可恢复、记忆分层与上下文注入、混合检索与质量控制、以及多环境配置与可观测。我们通过 Redis 检查点与三层队列、检索→重排→压缩、心跳与回放的 SSE、以及 Pydantic 强校验与加密配置解决这些问题。线上故障如 SSE 断流、Redis 抖动、Milvus/Embedding 降级都有对应预案。整体延迟、可用率与一稿通过率都有明显提升。

---

- 配套模块化话术详见：`面试话术/01-09-*.md`
- 可按岗位重点选择展开：多Agent 编排/记忆管理/向量检索/性能与可观测。
