### 快速上手（5-15 分钟）

适合第一次接触本项目的开发者，按顺序完成即可启动全部服务并在浏览器体验。

#### 你将获得
- **前端 UI**: `http://localhost:3000`
- **后端 API**: `http://localhost:8080`
- **Python 工具服务**: `http://localhost:1601`
- **MCP 客户端**: `http://localhost:8188`

#### 依赖要求
- **Java** ≥ 17，推荐配合 Maven
- **Node.js** ≥ 18，**pnpm** ≥ 7
- **Python** ≥ 3.11，推荐使用 `uv` 管理虚拟环境

可执行根目录脚本进行一次性检查：
```bash
chmod +x Genie_start.sh
./Genie_start.sh  # 只检查依赖与端口占用，不会长期驻留
```

---

#### 一键启动（推荐）
```bash
sh check_dep_port.sh   # 前端依赖与开发端口快速检查 + 启动 UI (3000)
sh Genie_start.sh      # 检查系统依赖、初始化、并串行启动前端/后端/工具/MCP
```

等待脚本显示所有服务可用后，打开 `http://localhost:3000` 即可。

---

#### 手动启动（按模块分四步）
1) 前端 UI（Vite + React）
```bash
cd ui
pnpm i
sh start.sh  # 或 pnpm run dev
# 访问： http://localhost:3000
```

2) 后端 Java（Spring Boot）
```bash
cd genie-backend
sh build.sh   # mvn clean package
sh start.sh   # 以脚本方式启动
# 健康检查：curl http://localhost:8080/web/health
```

3) Python 工具服务（FastAPI）
```bash
cd genie-tool
pip install uv
uv sync
source .venv/bin/activate
cp .env_template .env
# 至少配置以下环境变量：
#   OPENAI_API_KEY, OPENAI_BASE_URL（或自有 LLM 网关）
#   SERPER_SEARCH_API_KEY（Deep Search 需要，申请：https://serper.dev/）
python -m genie_tool.db.db_engine   # 首次初始化数据库
uv run python server.py             # 默认监听 1601
```

4) MCP 客户端（FastAPI）
```bash
cd genie-client
uv venv && source .venv/bin/activate
sh start.sh  # 默认监听 8188
```

---

#### 服务端口与环境变量
- **端口**：前端 3000、后端 8080、工具 1601、MCP 8188
- **前端服务网关**：在开发模式下，Vite 会将以 `/web` 开头的请求代理到 `SERVICE_BASE_URL`
  - 在 `ui/.env`（或 `.env.development`）中设置：
    ```
    SERVICE_BASE_URL=http://localhost:8080
    ```
- **后端 LLM 配置**：`genie-backend/src/main/resources/application.yml`
  - 替换占位符 `<input llm server here>` 与 `<input llm key here>` 为你的服务与密钥
  - 工具/MCP 地址默认：
    - `code_interpreter_url`: `http://127.0.0.1:1601`
    - `deep_search_url`: `http://127.0.0.1:1601`
    - `mcp_client_url`: `http://127.0.0.1:8188`

---

#### 目录一览
- `ui/` 前端（React + Vite + Tailwind）
- `genie-backend/` 后端（Spring Boot，多智能体编排、SSE 输出）
- `genie-tool/` Python 工具服务（代码执行、报告生成、深度搜索、文件存取）
- `genie-client/` MCP 客户端（对接外部 MCP 服务）

---

#### 快速验证路径
1) 浏览器打开 `http://localhost:3000`
2) DevTools Network 观察 `POST /web/api/v1/gpt/queryAgentStreamIncr` 是否保持 SSE 连接
3) 后端日志确认 `/AutoAgent`/编排与心跳输出
4) Python 工具服务 `http://localhost:1601/docs` 可打开 Swagger（若启用）
5) MCP 客户端 `http://localhost:8188/docs` 可打开 Swagger


