### 面试话术｜报告生成（HTML / PPT / Markdown）

- 一句话简介：把结构化洞见转成可交付的 HTML 页面、PPT 演示或 Markdown 文档，并自动回传预览链接与下载地址。

#### 职责与范围（20s）
- 设计 `ReportTool` 的多模板渲染，沉淀通用章节（封面/摘要/目录/数据图/结论）
- 对接前端 `ActionPanel` 的 HTML/MD 渲染器与下载链路

#### 实现要点（1min）
- Java 工具：`genie-backend/.../tool/common/ReportTool.java`
- Python 服务：`genie-tool` 的 `/v1/tool/report` 支持三种格式；内部基于模板引擎/绘图库
- 交付物管理：生成后的文件统一上传文件服务，返回 `{preview, download}` 链接
- 前端：`HTMLRenderer`、`MarkdownRenderer`、`FileRenderer` 自动识别并展示

#### 问题与解法
- 问题1：PPT 版式与中文字体兼容
  - 方案：内置思源黑体等通用字体，模板中固定字号/行距，导出前统一字体替换
  - 效果：跨平台显示一致

- 问题2：HTML 资源路径错乱
  - 方案：相对路径规范与构建时产物打包；统一静态资源前缀
  - 效果：前端预览 404 率清零

- 问题3：图表可读性与一致性
  - 方案：统一色板/网格/字号；数据异常点标注策略
  - 效果：读者理解成本下降

- 问题4：大图/多图导致文件过大
  - 方案：图像有损压缩与分辨率自适应；图片懒加载（HTML）
  - 效果：HTML 首屏渲染更快，PPT 文件平均减小 30%+

#### 指标与产出
- 报告生成成功率 98%+
- 端到端生成耗时（含检索/计算）多数在 30-120s
- 用户下载点击率显著提升（更聚焦的交付物）

#### Q&A 备选
- Q：如何避免“空洞报告”？
  - A：强制“证据→结论”对齐；DeepSearch 的引用与证据段落写入报告；模板校验必填章节。
- Q：如何做格式可扩展？
  - A：新格式通过新增渲染器与模板即可，工具接口不变。

#### 演进
- 模板市场与可视化图表库的可插拔化
- 报告“复盘与自评”自动生成，提高复用价值
