### 常见问题排查（FAQ）

#### 1) 前端无法连上后端
- 现象：`/web/api/v1/gpt/queryAgentStreamIncr` 404 或 CORS 错误
- 排查：
  - `ui/.env` 中 `SERVICE_BASE_URL` 是否为 `http://localhost:8080`
  - 后端是否已启动且 `server.port=8080`
  - 代理路径 `/web` 是否被 Vite 正确代理

#### 2) SSE 连接频繁断开/无数据
- 现象：短连接或浏览器无事件流
- 排查：
  - 浏览器/代理是否对 SSE 做了缓冲/超时处理
  - 关注是否收到 `heartbeat`
  - 后端日志是否有超时、错误堆栈

#### 3) LLM 未返回结果/报 401
- 现象：工具或编排无响应，日志提示鉴权失败
- 排查：
  - `application.yml` 中 `<input llm server here>` 与 `<input llm key here>` 是否已替换
  - `genie-tool/.env` 中 `OPENAI_API_KEY/OPENAI_BASE_URL` 是否正确

#### 4) DeepSearch 报错
- 现象：搜索工具不可用
- 排查：`SERPER_SEARCH_API_KEY` 是否配置（`https://serper.dev/` 申请）

#### 5) 端口被占用
- 现象：3000/8080/1601/8188 启动失败
- 排查：
  - `lsof -i :<port>` 查占用进程并释放
  - 使用 `Genie_start.sh` 启动/停止（脚本内含清理逻辑）

#### 6) Node/pnpm/Java 版本不匹配
- 现象：依赖安装或构建失败
- 排查：执行 `./Genie_start.sh` 查看检测报告并按提示升级

#### 7) 文件无法预览/下载
- 现象：预览/下载 404
- 排查：
  - 确认通过 `/v1/file_tool/upload_file(_data)` 已成功入库
  - 访问 `/v1/file_tool/preview/{file_id}/{file_name}` 是否返回 200


