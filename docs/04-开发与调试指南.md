### 开发与调试指南

#### 前端（ui/）
- 本地代理：`vite.config.ts` 会把以 `/web` 开头的请求代理到 `SERVICE_BASE_URL`
- 在 `ui/.env`（或 `.env.development`）中设置：
  ```
  SERVICE_BASE_URL=http://localhost:8080
  ```
- 启动：`sh start.sh` 或 `pnpm run dev`
- 断点调试：使用 Chrome DevTools / VS Code 源映射

#### 后端（genie-backend/）
- 主要入口：`GenieController`，流式接口 `/web/api/v1/gpt/queryAgentStreamIncr`
- 编排核心：`service/impl/*HandlerImpl.java`、`agent/agent/*`
- 构建&启动：`sh build.sh && sh start.sh`
- 本地日志：`tail -f genie-backend/genie-backend_startup.log`
- 关键配置：`src/main/resources/application.yml`
  - `server.port=8080`
  - `llm.default.*` 与 `llm.settings`（模型网关与 Key）
  - `autobots.*`（规划、执行、工具与模型配置）

#### Python 工具服务（genie-tool/）
- 启动：`uv sync && source .venv/bin/activate && uv run python server.py`
- 路由：`/v1/tool/*`、`/v1/file_tool/*`
- 流式：返回 `EventSourceResponse`，带 `heartbeat` 与 `[DONE]`
- 本地联调：确保 `.env` 配置 `OPENAI_*` 与 `SERPER_SEARCH_API_KEY`

#### MCP 客户端（genie-client/）
- 启动：`uv venv && source .venv/bin/activate && sh start.sh`
- 路由：`/v1/tool/list`、`/v1/tool/call`、`/health`
- Swagger：`http://localhost:8188/docs`

#### 常用联调手段
- UI → 后端：Network 观察 SSE，确认是否持续推送并含 `heartbeat`
- 后端 → 工具：根据 `application.yml` 的工具地址确认 1601 可访问
- 后端 → MCP：`/v1/tool/list` 验证 MCP Server 可连通

#### 小贴士
- SSE 需确保前后端代理与网关不“缓冲”响应（避免丢失实时性）
- 大文件/长上下文：关注 `max_tokens` 与前端渲染性能
- 变更 `application.yml` 后建议重新 `build.sh && start.sh`


