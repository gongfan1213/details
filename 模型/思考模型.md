agents本体，由经过工程化设计的prompt大语言模型构成的

环境：包括用户侧的实时需求表达和资源测的旅行服务生态系统

动作空间：涵盖工具调用，信息呈现和信息保存

奖励信号：显示反馈（工具执行结果和用户反馈），和隐式反馈（模型自我反思）

状态表示：对话和推理上下文

```
action=call_llm()
while action !="answer":
  if action == "function_call":
        call_functions()
  if action == "save_info":
        save_info()
  update_context()
  action=call_llm()
answer_question()
```
在初步推理步骤要求模型生成结构化的宏观的计划，并且在后续的推理当中显示传递该计划，或者是完整保存模型的整个思考的过程，直接作为下一轮的推理的输入的

也可以通过设计特殊的工具来中介模型间的信息的传递的

将输出伪装成工具调用的结果，确保大模型在多步推理过程当中保持目标一致性

在前序动作信息的传递方面，在推理过程当中，需要感知之前的action的信息，如果感知不明显，可能会出现循环推理的情况的，

关键在于承上启下，需要有极致将必要的信息有效传递到当前的推理步骤，同时精心设计prompt，激发模型按照要求进行下一步的推理的

是否一定要选用推理模型？

思考模型的推理效果往往更佳，并且prompt设计更佳简单，但是思考过程是不可控的，有的时候会对简单的问题过度思考的，导致响应时间延长的，成本增加的，

deepseek在思考过程当中经常做出一些假设的，这可能导致模型在后续过程当中将假设当作事实的，产生幻觉的，

非思考模型，可以运用一些prompt技巧，引导模型进行合理的chain-of-thought思考的，使得思考过程更加可控和简练

思考模型更佳适合用于冷启动阶段，非思考模型则更佳适合用于降低成本和延时的

工具调用的核心的差异在于服务对象的变化，传统接口面向人类或者程序的，agent工具需要适配大模型的交互方式的，

大模型能够处理更佳复杂的接口逻辑的，相较于程序，更依赖自然语言而非严格的代码规范的。


# 五大大模型友好接口设计原则：

### 1.语义清晰的接口定义

工具名和参数名，描述应该尽可能的自然，无歧义，避免技术术语或者缩写的

### 2.灵活的输入参数设计的

减少硬编码枚举，支持模糊输入，

### 3.自然语言优先的返回结果的

结构化的数据-》文本描述：大模型处理结构化数据（如json)的时候，token消耗更高的，并且推理效果不如自然语言的。

### 4.错误处理的自然语言引导

错误反馈应该具备可行动性，帮助大模型自主修正的

### 5.检索类工具

召回优先，大模型辅助排序，传统检索累工具需要精排（比如电商sku）但是大模型可以承担部分逻辑因此接口应该更侧重召回和粗排的

工具不仅能够和外部系统连接的，还能通过反馈参与到agent的整个决策过程当中

sft凭借针对性训练，能够实现对模型行为的更佳精准的控制，针对基座模型的长文本生成能力的不足的问题，可以采用数据蒸馏和合成技术的，构建高质量的长文本的数据集用于微调的

在实施sft的过程当中，需要特别关注模型的泛化能力

特别是在agent架构当中，要确保微调过程当中不会对模型的核心推理能力造成损害的

强化学习：关键在于环境建模和奖励机制的设计的

ru le-based评估：

聚集基础能力的验证的，包括：

幻觉检测，事实一致性

工具调用的完备性的（api覆盖和参数正确性）

规划路径的合理性（逻辑连贯性和可执行性）

Model-Based评估：衡量整体的智能水平

用户需求满足度（意图理解和任务完成质量）


交互流畅性（多伦对话的连贯性）

